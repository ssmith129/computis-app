<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Computis • Multi-Tenant Architecture</title>
    <link rel="stylesheet" href="../assets/styles.css" />
    <style>
      .client-switcher {
        background: #161b26;
        border: 1px solid #2a3447;
        border-radius: 8px;
        padding: 12px 16px;
        display: flex;
        align-items: center;
        gap: 12px;
        cursor: pointer;
        transition: all 0.2s;
        position: relative;
      }
      .client-switcher:hover {
        border-color: #6366f1;
        background: rgba(99, 102, 241, 0.05);
      }
      .client-avatar {
        width: 40px;
        height: 40px;
        border-radius: 8px;
        background: linear-gradient(135deg, #6366f1, #8b5cf6);
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        color: white;
      }
      .client-info {
        flex: 1;
      }
      .client-name {
        font-weight: 500;
        margin-bottom: 2px;
      }
      .client-meta {
        font-size: 12px;
        color: #9ca3af;
      }

      .client-dropdown {
        position: absolute;
        top: calc(100% + 8px);
        left: 0;
        right: 0;
        background: #1f2937;
        border: 1px solid #374151;
        border-radius: 8px;
        padding: 8px;
        display: none;
        z-index: 1000;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
        max-height: 400px;
        overflow-y: auto;
      }
      .client-dropdown.open {
        display: block;
      }
      .dropdown-item {
        padding: 10px 12px;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        gap: 12px;
      }
      .dropdown-item:hover {
        background: rgba(99, 102, 241, 0.1);
      }
      .dropdown-item.active {
        background: rgba(99, 102, 241, 0.15);
        border: 1px solid #6366f1;
      }

      .role-badge {
        padding: 4px 10px;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }
      .role-badge.admin {
        background: rgba(168, 85, 247, 0.2);
        color: #a855f7;
      }
      .role-badge.cpa {
        background: rgba(99, 102, 241, 0.2);
        color: #6366f1;
      }
      .role-badge.viewer {
        background: rgba(107, 114, 128, 0.2);
        color: #9ca3af;
      }

      .permission-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 16px;
        margin-top: 16px;
      }
      .permission-card {
        background: #161b26;
        border: 1px solid #2a3447;
        border-radius: 8px;
        padding: 16px;
      }
      .permission-card.enabled {
        border-color: #6366f1;
        background: rgba(99, 102, 241, 0.05);
      }
      .permission-card.disabled {
        opacity: 0.4;
      }

      .client-portfolio {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 16px;
        margin-bottom: 24px;
      }
      .portfolio-card {
        background: #161b26;
        border: 1px solid #2a3447;
        border-radius: 8px;
        padding: 16px;
      }
      .portfolio-value {
        font-size: 24px;
        font-weight: 600;
        margin-bottom: 4px;
      }
      .portfolio-label {
        font-size: 13px;
        color: #9ca3af;
      }

      .workspace-tabs {
        display: flex;
        gap: 8px;
        margin-bottom: 24px;
        border-bottom: 1px solid #2a3447;
        padding-bottom: 0;
      }
      .workspace-tab {
        padding: 12px 20px;
        border-radius: 6px 6px 0 0;
        background: transparent;
        border: none;
        color: #9ca3af;
        cursor: pointer;
        transition: all 0.2s;
        position: relative;
      }
      .workspace-tab.active {
        color: #e5e7eb;
        background: #161b26;
      }
      .workspace-tab.active::after {
        content: "";
        position: absolute;
        bottom: -1px;
        left: 0;
        right: 0;
        height: 2px;
        background: #6366f1;
      }
    </style>
  </head>
  <body>
    <header class="app-header">
      <div class="inner container">
        <a class="brand" href="index.html"
          ><span class="logo"></span><span class="label">Computis</span></a
        >
        <nav class="nav">
          <a href="index.html">Dashboard</a>
          <a href="ai-confidence-chips.html">AI Confidence</a>
          <a href="audit-trail-drawer.html">Audit Trail</a>
          <a href="visual-rule-builder.html">Rule Builder</a>
          <a href="contextual-anomaly-detection.html">Anomaly Detection</a>
          <a href="multi-tenant-architecture.html">Multi-Tenant</a>
        </nav>
      </div>
    </header>

    <main class="container" aria-labelledby="title">
      <h1 id="title">Modular Multi-Tenant Architecture</h1>

      <section class="card" style="margin-bottom: 24px">
        <h3>Design Element Overview</h3>
        <p style="color: #9ca3af; line-height: 1.6">
          <strong>Problem:</strong> CPAs manage multiple clients with different
          needs; single-tenant design wouldn't scale.<br /><br />
          <strong>Solution:</strong> Multi-tenant architecture with role-based
          views and client-level permissions.<br /><br />
          <strong>Impact:</strong> Enabled enterprise CPA firm adoption with
          100+ client portfolios managed in single platform.
        </p>
      </section>

      <div
        style="
          display: grid;
          grid-template-columns: 350px 1fr;
          gap: 24px;
          margin-bottom: 24px;
        "
      >
        <div>
          <h3 style="margin-bottom: 12px">Active Client</h3>
          <div class="client-switcher" onclick="toggleClientDropdown()">
            <div class="client-avatar">AC</div>
            <div class="client-info">
              <div class="client-name">Acme Crypto Fund</div>
              <div class="client-meta">142 transactions • $2.4M portfolio</div>
            </div>
            <span style="color: #9ca3af">▼</span>

            <div id="clientDropdown" class="client-dropdown">
              <input
                type="text"
                placeholder="Search clients..."
                style="
                  width: 100%;
                  padding: 8px;
                  background: #0b0f1a;
                  border: 1px solid #2a3447;
                  border-radius: 4px;
                  color: #e5e7eb;
                  margin-bottom: 8px;
                "
                oninput="filterClients(this.value)"
              />

              <div
                class="dropdown-item active"
                onclick="switchClient(this, 'Acme Crypto Fund', 'AC')"
              >
                <div
                  class="client-avatar"
                  style="width: 32px; height: 32px; font-size: 14px"
                >
                  AC
                </div>
                <div style="flex: 1">
                  <div style="font-weight: 500">Acme Crypto Fund</div>
                  <div style="font-size: 12px; color: #9ca3af">
                    142 transactions
                  </div>
                </div>
                <span class="badge success">Active</span>
              </div>

              <div
                class="dropdown-item"
                onclick="switchClient(this, 'BlockTech Ventures', 'BV')"
              >
                <div
                  class="client-avatar"
                  style="
                    width: 32px;
                    height: 32px;
                    font-size: 14px;
                    background: linear-gradient(135deg, #ec4899, #f43f5e);
                  "
                >
                  BV
                </div>
                <div style="flex: 1">
                  <div style="font-weight: 500">BlockTech Ventures</div>
                  <div style="font-size: 12px; color: #9ca3af">
                    89 transactions
                  </div>
                </div>
              </div>

              <div
                class="dropdown-item"
                onclick="switchClient(this, 'Crypto Innovations LLC', 'CI')"
              >
                <div
                  class="client-avatar"
                  style="
                    width: 32px;
                    height: 32px;
                    font-size: 14px;
                    background: linear-gradient(135deg, #14b8a6, #06b6d4);
                  "
                >
                  CI
                </div>
                <div style="flex: 1">
                  <div style="font-weight: 500">Crypto Innovations LLC</div>
                  <div style="font-size: 12px; color: #9ca3af">
                    256 transactions
                  </div>
                </div>
              </div>

              <div
                class="dropdown-item"
                onclick="switchClient(this, 'DeFi Capital Partners', 'DP')"
              >
                <div
                  class="client-avatar"
                  style="
                    width: 32px;
                    height: 32px;
                    font-size: 14px;
                    background: linear-gradient(135deg, #f59e0b, #ef4444);
                  "
                >
                  DP
                </div>
                <div style="flex: 1">
                  <div style="font-weight: 500">DeFi Capital Partners</div>
                  <div style="font-size: 12px; color: #9ca3af">
                    1,023 transactions
                  </div>
                </div>
                <span class="badge warn">Review</span>
              </div>

              <div
                class="dropdown-item"
                onclick="switchClient(this, 'Ethereum Advisors', 'EA')"
              >
                <div
                  class="client-avatar"
                  style="
                    width: 32px;
                    height: 32px;
                    font-size: 14px;
                    background: linear-gradient(135deg, #8b5cf6, #6366f1);
                  "
                >
                  EA
                </div>
                <div style="flex: 1">
                  <div style="font-weight: 500">Ethereum Advisors</div>
                  <div style="font-size: 12px; color: #9ca3af">
                    67 transactions
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div style="margin-top: 16px">
            <h3 style="margin-bottom: 12px">Your Role</h3>
            <div
              style="
                background: #161b26;
                border: 1px solid #2a3447;
                border-radius: 8px;
                padding: 16px;
              "
            >
              <div
                style="
                  display: flex;
                  align-items: center;
                  gap: 12px;
                  margin-bottom: 12px;
                "
              >
                <div
                  style="
                    width: 48px;
                    height: 48px;
                    border-radius: 50%;
                    background: linear-gradient(135deg, #6366f1, #8b5cf6);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-weight: 600;
                    color: white;
                  "
                >
                  SC
                </div>
                <div>
                  <div style="font-weight: 500">Sarah Chen, CPA</div>
                  <span class="role-badge cpa">Senior CPA</span>
                </div>
              </div>
              <div style="font-size: 13px; color: #9ca3af; line-height: 1.5">
                Full access to client data, classifications, and exports. Can
                override AI decisions and manage team permissions.
              </div>
            </div>
          </div>
        </div>

        <div>
          <h3 style="margin-bottom: 12px">Client Portfolio Overview</h3>
          <div class="client-portfolio">
            <div class="portfolio-card">
              <div class="portfolio-value" style="color: #6366f1">$2.4M</div>
              <div class="portfolio-label">Total Value</div>
            </div>
            <div class="portfolio-card">
              <div class="portfolio-value" style="color: #22c55e">+$342K</div>
              <div class="portfolio-label">Realized Gains</div>
            </div>
            <div class="portfolio-card">
              <div class="portfolio-value" style="color: #fbbf24">$89K</div>
              <div class="portfolio-label">Tax Liability (Est.)</div>
            </div>
            <div class="portfolio-card">
              <div class="portfolio-value">142</div>
              <div class="portfolio-label">Transactions YTD</div>
            </div>
          </div>
        </div>
      </div>

      <section class="card">
        <div class="workspace-tabs">
          <button
            class="workspace-tab active"
            onclick="switchWorkspace(this, 'permissions')"
          >
            Permissions
          </button>
          <button class="workspace-tab" onclick="switchWorkspace(this, 'team')">
            Team Access
          </button>
          <button
            class="workspace-tab"
            onclick="switchWorkspace(this, 'settings')"
          >
            Client Settings
          </button>
        </div>

        <div id="permissions-workspace">
          <h3 style="margin-bottom: 16px">
            Role-Based Permissions for Current Client
          </h3>

          <div class="permission-grid">
            <div class="permission-card enabled">
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  margin-bottom: 8px;
                "
              >
                <span style="font-weight: 500">📊 View Transactions</span>
                <span class="badge success">Enabled</span>
              </div>
              <div style="font-size: 12px; color: #9ca3af">
                Access to all transaction data and history
              </div>
            </div>

            <div class="permission-card enabled">
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  margin-bottom: 8px;
                "
              >
                <span style="font-weight: 500">✏️ Edit Classifications</span>
                <span class="badge success">Enabled</span>
              </div>
              <div style="font-size: 12px; color: #9ca3af">
                Override AI and modify transaction types
              </div>
            </div>

            <div class="permission-card enabled">
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  margin-bottom: 8px;
                "
              >
                <span style="font-weight: 500">📥 Export Reports</span>
                <span class="badge success">Enabled</span>
              </div>
              <div style="font-size: 12px; color: #9ca3af">
                Generate IRS forms and CSV exports
              </div>
            </div>

            <div class="permission-card enabled">
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  margin-bottom: 8px;
                "
              >
                <span style="font-weight: 500">🔧 Manage Rules</span>
                <span class="badge success">Enabled</span>
              </div>
              <div style="font-size: 12px; color: #9ca3af">
                Create and modify classification rules
              </div>
            </div>

            <div class="permission-card enabled">
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  margin-bottom: 8px;
                "
              >
                <span style="font-weight: 500">🔍 Audit Trail</span>
                <span class="badge success">Enabled</span>
              </div>
              <div style="font-size: 12px; color: #9ca3af">
                Full access to audit logs and history
              </div>
            </div>

            <div class="permission-card enabled">
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  margin-bottom: 8px;
                "
              >
                <span style="font-weight: 500">👥 Team Management</span>
                <span class="badge success">Enabled</span>
              </div>
              <div style="font-size: 12px; color: #9ca3af">
                Add/remove team members and set permissions
              </div>
            </div>

            <div class="permission-card disabled">
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  margin-bottom: 8px;
                "
              >
                <span style="font-weight: 500">🗑️ Delete Client Data</span>
                <span class="badge">Disabled</span>
              </div>
              <div style="font-size: 12px; color: #9ca3af">
                Requires Admin role for data deletion
              </div>
            </div>

            <div class="permission-card enabled">
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  margin-bottom: 8px;
                "
              >
                <span style="font-weight: 500">💬 Client Portal Access</span>
                <span class="badge success">Enabled</span>
              </div>
              <div style="font-size: 12px; color: #9ca3af">
                Grant clients view-only access to their data
              </div>
            </div>
          </div>
        </div>

        <div id="team-workspace" style="display: none">
          <h3 style="margin-bottom: 16px">
            Team Members with Access to This Client
          </h3>

          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>Team Member</th>
                  <th>Role</th>
                  <th>Last Active</th>
                  <th>Permissions</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <div style="display: flex; align-items: center; gap: 8px">
                      <div
                        style="
                          width: 32px;
                          height: 32px;
                          border-radius: 50%;
                          background: linear-gradient(135deg, #6366f1, #8b5cf6);
                          display: flex;
                          align-items: center;
                          justify-content: center;
                          font-weight: 600;
                          color: white;
                          font-size: 12px;
                        "
                      >
                        SC
                      </div>
                      <div>
                        <div style="font-weight: 500">Sarah Chen</div>
                        <div style="font-size: 12px; color: #9ca3af">
                          sarah.chen@cpa.com
                        </div>
                      </div>
                    </div>
                  </td>
                  <td><span class="role-badge cpa">Senior CPA</span></td>
                  <td>2 hours ago</td>
                  <td><span class="badge success">Full Access</span></td>
                  <td>
                    <button style="padding: 4px 8px; font-size: 12px">
                      Manage
                    </button>
                  </td>
                </tr>
                <tr>
                  <td>
                    <div style="display: flex; align-items: center; gap: 8px">
                      <div
                        style="
                          width: 32px;
                          height: 32px;
                          border-radius: 50%;
                          background: linear-gradient(135deg, #ec4899, #f43f5e);
                          display: flex;
                          align-items: center;
                          justify-content: center;
                          font-weight: 600;
                          color: white;
                          font-size: 12px;
                        "
                      >
                        DW
                      </div>
                      <div>
                        <div style="font-weight: 500">David Wong</div>
                        <div style="font-size: 12px; color: #9ca3af">
                          david.wong@cpa.com
                        </div>
                      </div>
                    </div>
                  </td>
                  <td>
                    <span class="role-badge admin">Managing Partner</span>
                  </td>
                  <td>1 day ago</td>
                  <td><span class="badge success">Full Access</span></td>
                  <td>
                    <button style="padding: 4px 8px; font-size: 12px">
                      Manage
                    </button>
                  </td>
                </tr>
                <tr>
                  <td>
                    <div style="display: flex; align-items: center; gap: 8px">
                      <div
                        style="
                          width: 32px;
                          height: 32px;
                          border-radius: 50%;
                          background: linear-gradient(135deg, #14b8a6, #06b6d4);
                          display: flex;
                          align-items: center;
                          justify-content: center;
                          font-weight: 600;
                          color: white;
                          font-size: 12px;
                        "
                      >
                        JP
                      </div>
                      <div>
                        <div style="font-weight: 500">James Park</div>
                        <div style="font-size: 12px; color: #9ca3af">
                          james.park@acmefund.com
                        </div>
                      </div>
                    </div>
                  </td>
                  <td><span class="role-badge viewer">Client</span></td>
                  <td>3 days ago</td>
                  <td><span class="badge">View Only</span></td>
                  <td>
                    <button style="padding: 4px 8px; font-size: 12px">
                      Manage
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div id="settings-workspace" style="display: none">
          <h3 style="margin-bottom: 16px">Client-Specific Settings</h3>
          <div style="color: #9ca3af">
            Configure client preferences, tax settings, and reporting options...
          </div>
        </div>
      </section>
    </main>

    <footer>© 2025 Computis • Design Element Showcase</footer>
    <div class="toast-area" aria-live="polite"></div>

    <script src="../assets/app.js"></script>
    <script>
      function toggleClientDropdown() {
        document.getElementById("clientDropdown").classList.toggle("open");
      }

      function switchClient(el, name, initials) {
        document
          .querySelectorAll(".dropdown-item")
          .forEach((item) => item.classList.remove("active"));
        el.classList.add("active");

        document.querySelector(".client-name").textContent = name;
        document.querySelector(".client-avatar").textContent = initials;

        toggleClientDropdown();
        toast(`Switched to ${name}`);
      }

      function filterClients(query) {
        const items = document.querySelectorAll(".dropdown-item");
        items.forEach((item) => {
          const text = item.textContent.toLowerCase();
          item.style.display = text.includes(query.toLowerCase())
            ? "flex"
            : "none";
        });
      }

      function switchWorkspace(tab, workspace) {
        document
          .querySelectorAll(".workspace-tab")
          .forEach((t) => t.classList.remove("active"));
        tab.classList.add("active");

        document.getElementById("permissions-workspace").style.display = "none";
        document.getElementById("team-workspace").style.display = "none";
        document.getElementById("settings-workspace").style.display = "none";

        document.getElementById(`${workspace}-workspace`).style.display =
          "block";
      }

      document.addEventListener("click", (e) => {
        if (!e.target.closest(".client-switcher")) {
          document.getElementById("clientDropdown").classList.remove("open");
        }
      });
    </script>
  </body>
</html>
